(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){"use strict";var r=n(24),a=n(32),s=n(5),c=n(0),i=n(332),u=n(324),o=n(18),l=n.n(o);t.a=function(e){return function(t){var n=function(){var e=Object(c.useState)(),t=Object(a.a)(e,2),n=t[0],r=t[1],s=l.a.interceptors.request.use((function(e){return r(null),Promise.resolve(e)}),(function(e){return r(!0),Promise.reject(e.message)})),i=l.a.interceptors.response.use((function(e){return r(null),Promise.resolve(e)}),(function(e){var t;return r((null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.data.errors[0].message)||e.message),Promise.reject(e)}));return Object(c.useEffect)((function(){return function(){l.a.interceptors.request.eject(s),l.a.interceptors.response.eject(i)}}),[s,i]),[n,function(){r(null)}]}(),o=Object(a.a)(n,2),d=o[0],j=o[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)(i.a,{onClose:j,"aria-labelledby":"error-modal-title",open:d,children:Object(s.jsxs)(u.a,{id:"error-modal",children:["Error occured: ",d]})}),Object(s.jsx)(e,Object(r.a)({},t))]})}}},103:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={To:"to",From:"From"}},166:function(e,t,n){},184:function(e,t,n){},189:function(e,t,n){},288:function(e,t,n){},290:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),s=n.n(a),c=n(10),i=n.n(c),u=(n(166),n(18)),o=n.n(u);o.a.defaults.withCredentials=!0;n(184);var l=n(328),d=n(12),j=n(27),b=n(102),m=n(22),f=n.n(m),h=n(35),p=(n(189),n(322)),v=n(333),O=n(325),g=n(331),x=n(327),y=n(137),w=n(84),_="authenticate",I="signout",S=function(e,t){return function(){var n=Object(h.a)(f.a.mark((function n(r){var a,s;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.post(e,t);case 2:a=n.sent,s=a.data,r({type:_,value:s});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},C="signin",N="signup",k=n(95),M=n(100),P=Object(M.a)((function(e){e.history;var t=Object(j.b)(),n=Object(y.a)({initialValues:{email:"",userId:"",authMethod:C},validationSchema:w.a({email:w.b().email("Invalid email address").required("Required"),userId:w.b().required("Required")}),onSubmit:function(){var e=Object(h.a)(f.a.mark((function e(n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="/api/users/".concat(n.authMethod),t(S(r,n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});return Object(r.jsx)(p.a,{elevation:10,className:"auth",title:"We Study Authentication",children:Object(r.jsxs)("form",{onSubmit:n.handleSubmit,className:"auth__form",children:[Object(r.jsxs)(v.a,{className:"auth__radio","aria-label":"method",name:"authMethod",value:n.values.authMethod,onChange:n.handleChange,children:[Object(r.jsx)(O.a,{value:C,control:Object(r.jsx)(g.a,{}),label:"Sign In"}),Object(r.jsx)(O.a,{value:N,control:Object(r.jsx)(g.a,{}),label:"Sign Up"})]}),Object(r.jsx)(k.a,{label:"Email",className:"auth__input",id:"email",name:"email",type:"email",onChange:n.handleChange,value:n.values.email,error:n.touched.email&&n.errors.email,errorMessage:n.errors.email,variant:"outlined"}),Object(r.jsx)(k.a,{label:"UserId",className:"auth__input",id:"userId",name:"userId",type:"text",onChange:n.handleChange,value:n.values.userId,error:n.touched.userId&&n.errors.userId,errorMessage:n.errors.userId,variant:"outlined"}),Object(r.jsx)(x.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,children:"Submit"})]})})})),q=(n(288),n(49)),A=function(){var e=Object(j.b)(),t=Object(j.c)((function(e){return e.auth})).user;return Object(r.jsxs)("nav",{className:"navigation",children:[Object(r.jsxs)("p",{className:"navigation__user-text",children:["Hello, ",t.userId]}),Object(r.jsx)(q.b,{className:"navigation__item",activeClassName:"navigation__item--active",to:"/compose",children:Object(r.jsx)("span",{children:" Compose"})}),Object(r.jsx)(q.b,{className:"navigation__item",activeClassName:"navigation__item--active",to:"/manage",children:Object(r.jsx)("span",{children:"Manage"})}),Object(r.jsx)(x.a,{color:"secondary",variant:"contained",onClick:function(){e(function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/users/signout");case 2:t({type:I});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Signout"})]})},E=s.a.lazy((function(){return n.e(5).then(n.bind(null,358))})),R=s.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,356))})),F=function(){var e=Object(d.g)(),t=Object(j.b)(),n=Object(j.c)((function(e){return e.auth}));Object(a.useEffect)((function(){t(function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/api/users/currentuser");case 2:n=e.sent,r=n.data,t({type:_,value:r.currentUser});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){console.log(n),n.isAuth&&e.push("/")}),[n]);var s=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(d.b,{component:P}),Object(r.jsx)(d.a,{from:"/",to:"/auth"})]});return n.isAuth&&(s=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(A,{}),Object(r.jsx)(a.Suspense,{fallback:Object(r.jsx)(l.a,{color:"secondary"}),children:Object(r.jsxs)(d.d,{children:[Object(r.jsx)(d.b,{path:"/compose",component:E}),Object(r.jsx)(d.b,{path:"/manage",component:R}),Object(r.jsx)(d.b,{component:function(){return Object(r.jsx)("h1",{children:"Please select"})}})]})}),Object(r.jsx)(b.a,{})]})),Object(r.jsx)("div",{className:"container",children:s})},T=n(45),U=n(147),W=n(148),z=n(24),J={isAuth:!1,user:null},B=n(78),D=n(103),H=n(72),V={messagesSent:[],messagesReccived:[]},G=Object(T.createStore)(Object(T.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(z.a)(Object(z.a)({},e),{},{isAuth:t.value&&!0,user:t.value,error:null});case I:return Object(z.a)(Object(z.a)({},e),{},{isAuth:!1});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H.a:return e;case H.c:return{messagesSent:t.messages.sended,messagesReccived:t.messages.reccived};case H.b:var n=t.messgeType===D.a.To?"messagesSent":"messagesReccived";return Object(z.a)(Object(z.a)({},e),{},Object(B.a)({},n,e[n].filter((function(e){return e.id!==t.messageId}))));default:return e}}}),Object(U.composeWithDevTools)(Object(T.applyMiddleware)(W.a)));i.a.render(Object(r.jsx)(q.a,{children:Object(r.jsx)(j.a,{store:G,children:Object(r.jsx)(F,{})})}),document.getElementById("root"))},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return j})),n.d(t,"e",(function(){return b}));var r=n(22),a=n.n(r),s=n(35),c=n(18),i=n.n(c),u="create-message",o="delete-message",l="get-messages",d=function(e){return function(t){return new Promise((function(n){i.a.post("/api/message/create",e).then((function(){t({type:u}),n()}))}))}},j=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get("/api/message/".concat(e));case 2:r=t.sent,s=r.data,n({type:l,messages:s});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e,t){return function(n){return new Promise((function(r){i.a.delete("/api/message/delete/".concat(e)).then((function(){n({type:o,messageId:e,messgeType:t}),r()}))}))}}},95:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(24),a=n(5),s=(n(0),n(292)),c=function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(s.a,Object(r.a)({},e)),e.error?Object(a.jsx)("div",{children:e.errorMessage}):null]})}}},[[290,1,2]]]);
//# sourceMappingURL=main.130fb68d.chunk.js.map